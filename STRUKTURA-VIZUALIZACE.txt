================================================================================
                    STANDARDIZOVANÃ STRUKTURA MODULÅ®
================================================================================

PÅ˜ED (âŒ ProblematickÃ©):
------------------------
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ 030-pronajimatel/
â”‚   â”‚   â””â”€â”€ forms/
â”‚   â”‚       â””â”€â”€ form.js
â”‚   â”‚           â”œâ”€â”€ TYPE_SCHEMAS {...}  â† DUPLIKACE 1
â”‚   â”‚           â”œâ”€â”€ renderForm()
â”‚   â”‚           â””â”€â”€ useUnsavedHelper()
â”‚   â”‚
â”‚   â”œâ”€â”€ 050-najemnik/
â”‚   â”‚   â””â”€â”€ forms/
â”‚   â”‚       â””â”€â”€ form.js
â”‚   â”‚           â”œâ”€â”€ TYPE_SCHEMAS {...}  â† DUPLIKACE 2 (stejnÃ© jako 1!)
â”‚   â”‚           â”œâ”€â”€ renderForm()
â”‚   â”‚           â””â”€â”€ useUnsavedHelper()
â”‚   â”‚
â”‚   â””â”€â”€ 040-nemovitost/
â”‚       â””â”€â”€ forms/
â”‚           â”œâ”€â”€ edit.js      â† PRÃZDNÃ (1 byte)
â”‚           â””â”€â”€ detail.js    â† PRÃZDNÃ (1 byte)


PO (âœ… OpravenÃ©):
-----------------
src/
â”œâ”€â”€ db/
â”‚   â””â”€â”€ type-schemas.js      â† ğŸ¯ CENTRÃLNÃ SCHÃ‰MATA
â”‚       â”œâ”€â”€ SUBJECT_TYPE_SCHEMAS
â”‚       â”‚   â”œâ”€â”€ osoba
â”‚       â”‚   â”œâ”€â”€ osvc
â”‚       â”‚   â”œâ”€â”€ firma
â”‚       â”‚   â”œâ”€â”€ spolek
â”‚       â”‚   â”œâ”€â”€ stat
â”‚       â”‚   â””â”€â”€ zastupce
â”‚       â”œâ”€â”€ PROPERTY_SCHEMA
â”‚       â”œâ”€â”€ getSubjectTypeSchema(type)
â”‚       â””â”€â”€ getPropertySchema()
â”‚
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ universal-form.js    â† ğŸ¯ UNIVERZÃLNÃ WRAPPER
â”‚       â”œâ”€â”€ renderUniversalForm()
â”‚       â”‚   â”œâ”€â”€ âœ… Breadcrumbs (automaticky)
â”‚       â”‚   â”œâ”€â”€ âœ… Common Actions (automaticky)
â”‚       â”‚   â”œâ”€â”€ âœ… Attachments (automaticky)
â”‚       â”‚   â”œâ”€â”€ âœ… History (automaticky)
â”‚       â”‚   â”œâ”€â”€ âœ… Archive (volitelnÄ›)
â”‚       â”‚   â””â”€â”€ âœ… Unsaved Warning (automaticky)
â”‚       â”œâ”€â”€ getModuleIdFromHash()
â”‚       â””â”€â”€ navigateToModuleOverview()
â”‚
â””â”€â”€ modules/
    â”œâ”€â”€ 030-pronajimatel/
    â”‚   â””â”€â”€ forms/
    â”‚       â””â”€â”€ form.js
    â”‚           â”œâ”€â”€ import { getSubjectTypeSchema } â† pouÅ¾Ã­vÃ¡ sdÃ­lenÃ©
    â”‚           â”œâ”€â”€ import { renderUniversalForm }  â† pouÅ¾Ã­vÃ¡ wrapper
    â”‚           â””â”€â”€ 68 Å™Ã¡dkÅ¯ (bylo 104)
    â”‚
    â”œâ”€â”€ 050-najemnik/
    â”‚   â””â”€â”€ forms/
    â”‚       â””â”€â”€ form.js
    â”‚           â”œâ”€â”€ import { getSubjectTypeSchema } â† pouÅ¾Ã­vÃ¡ sdÃ­lenÃ©
    â”‚           â”œâ”€â”€ import { renderUniversalForm }  â† pouÅ¾Ã­vÃ¡ wrapper
    â”‚           â””â”€â”€ 76 Å™Ã¡dkÅ¯ (bylo 107)
    â”‚
    â”œâ”€â”€ 040-nemovitost/
    â”‚   â””â”€â”€ forms/
    â”‚       â”œâ”€â”€ edit.js
    â”‚       â”‚   â”œâ”€â”€ import { getPropertySchema }    â† pouÅ¾Ã­vÃ¡ sdÃ­lenÃ©
    â”‚       â”‚   â”œâ”€â”€ import { renderUniversalForm }  â† pouÅ¾Ã­vÃ¡ wrapper
    â”‚       â”‚   â””â”€â”€ 64 Å™Ã¡dkÅ¯ (bylo 1 byte!)
    â”‚       â””â”€â”€ detail.js
    â”‚           â”œâ”€â”€ import { getPropertySchema }    â† pouÅ¾Ã­vÃ¡ sdÃ­lenÃ©
    â”‚           â”œâ”€â”€ import { renderUniversalForm }  â† pouÅ¾Ã­vÃ¡ wrapper
    â”‚           â””â”€â”€ 48 Å™Ã¡dkÅ¯ (bylo 1 byte!)
    â”‚
    â””â”€â”€ 000-sablona/
        â””â”€â”€ forms/
            â”œâ”€â”€ edit.js      â† ğŸ“ VZOROVÃ IMPLEMENTACE
            â””â”€â”€ detail.js    â† ğŸ“ VZOROVÃ IMPLEMENTACE


================================================================================
                        JAK FUNGUJE renderUniversalForm()
================================================================================

KROK 1: Definuj schÃ©ma
----------------------
const schema = getSubjectTypeSchema('osoba');
// nebo
const schema = [
  { key: 'name', label: 'NÃ¡zev *', type: 'text', required: true },
  { key: 'description', label: 'Popis', type: 'textarea' },
  // ...
];

KROK 2: Zavolej renderUniversalForm()
--------------------------------------
await renderUniversalForm({
  root,                           // kam renderovat
  schema,                         // co renderovat
  initialData: { ... },           // poÄÃ¡teÄnÃ­ hodnoty
  breadcrumbs: [ ... ],           // drobeÄkovÃ¡ navigace
  onSave: async (values) => {     // co udÄ›lat pÅ™i uloÅ¾enÃ­
    const { data, error } = await saveToDb(values);
    if (error) {
      toast('Chyba!', 'error');
      return { success: false, error };
    }
    toast('UloÅ¾eno!', 'success');
    navigateToModuleOverview('030-pronajimatel');
    return { success: true, data };
  },
  options: {
    entity: 'subject',            // typ entity (pro pÅ™Ã­lohy/historii)
    entityId: 'abc123',           // ID entity
    showAttachments: true,        // âœ… zobraz tlaÄÃ­tko PÅ™Ã­lohy
    showHistory: true,            // âœ… zobraz tlaÄÃ­tko Historie
    showArchive: false,           // âŒ nezobrazuj Archivaci
    readOnly: false,              // false = editovatelnÃ½
  }
});

KROK 3: VÃ½sledek
----------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DomÅ¯ â€º Modul â€º Ãšprava               [Breadcrumbs]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ NÃ¡zev *      â”‚  â”‚ Popis        â”‚            â”‚
â”‚  â”‚ [__________ ]â”‚  â”‚ [__________ ]â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ Stav         â”‚                               â”‚
â”‚  â”‚ [â–¼ AktivnÃ­  ]â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             [UloÅ¾it] [ZpÄ›t] [PÅ™Ã­lohy] [Historie]  â† Common Actions


================================================================================
                            VÃHODY NOVÃ‰ STRUKTURY
================================================================================

1. âœ… Å½ÃDNÃ DUPLIKACE
   - TYPE_SCHEMAS na jednom mÃ­stÄ›
   - RenderovacÃ­ logika na jednom mÃ­stÄ›
   - UÅ¡etÅ™eno: ~110 Å™Ã¡dkÅ¯ duplikovanÃ©ho kÃ³du

2. âœ… KONZISTENTNÃ UX
   - VÅ¡echny formulÃ¡Å™e vypadajÃ­ stejnÄ›
   - VÅ¡echny formulÃ¡Å™e se chovajÃ­ stejnÄ›
   - UÅ¾ivatel vÃ­, co mÅ¯Å¾e Äekat

3. âœ… AUTOMATICKÃ‰ FUNKCE
   - Breadcrumbs          â†’ automaticky pÅ™idÃ¡ny
   - Common Actions       â†’ automaticky pÅ™idÃ¡ny
   - Attachments          â†’ automaticky pÅ™idÃ¡ny (pokud entityId)
   - History              â†’ automaticky pÅ™idÃ¡ny (pokud entityId)
   - Unsaved Warning      â†’ automaticky pÅ™idÃ¡no

4. âœ… SNADNÃ ÃšDRÅ½BA
   - ZmÄ›na na jednom mÃ­stÄ› â†’ promÃ­tne se vÅ¡ude
   - PÅ™idÃ¡nÃ­ novÃ© funkce â†’ staÄÃ­ upravit universal-form.js
   - Oprava bug â†’ opravÃ­ se vÅ¡ude najednou

5. âœ… RYCHLÃ VÃVOJ
   - NovÃ½ modul za pÃ¡r minut
   - ZkopÃ­ruj template (000-sablona)
   - Uprav schema
   - Hotovo!


================================================================================
                         JAK VYTVOÅ˜IT NOVÃ MODUL
================================================================================

1. ZkopÃ­ruj Å¡ablonu
   cp -r src/modules/000-sablona src/modules/XXX-muj-modul

2. Uprav module.config.js
   {
     id: 'XXX-muj-modul',
     title: 'MÅ¯j modul',
     icon: 'folder',
     ...
   }

3. Uprav forms/edit.js - schÃ©ma
   const SCHEMA = [
     { key: 'name', label: 'NÃ¡zev', type: 'text', required: true },
     // ... tvoje pole
   ];

4. Implementuj DB funkce
   async function getData(id) { ... }
   async function saveData(values) { ... }

5. Propoj s formulÃ¡Å™em
   onSave: async (values) => {
     const { data, error } = await saveData(values);
     // ...
   }

6. Hotovo!
   âœ… MÃ¡Å¡ formulÃ¡Å™ s breadcrumbs
   âœ… MÃ¡Å¡ common actions (UloÅ¾it, ZpÄ›t)
   âœ… MÃ¡Å¡ podporu pro pÅ™Ã­lohy
   âœ… MÃ¡Å¡ podporu pro historii
   âœ… MÃ¡Å¡ unsaved warning


================================================================================
                              SOUBORY K PÅ˜EÄŒTENÃ
================================================================================

ğŸ“– STRUKTURA-ODPOVED.md
   â†’ KompletnÃ­ odpovÄ›Ä na tvÅ¯j dotaz (Äesky)
   â†’ Co bylo Å¡patnÄ›, co je teÄ opraveno
   â†’ Jak to pouÅ¾Ã­t

ğŸ“– docs/standardized-module-structure.md
   â†’ TechnickÃ¡ dokumentace
   â†’ KompletnÃ­ pÅ™Ã­klady
   â†’ API reference

ğŸ“– src/modules/000-sablona/
   â†’ VzorovÃ½ modul
   â†’ UkÃ¡zkovÃ© formulÃ¡Å™e
   â†’ Copy-paste ready


================================================================================
